{% extends 'base.html' %}
{% block content %}
<div class="row">
  <div class="col-lg-10 mx-auto">
    <div class="card p-4 shadow">
      <h3 class="mb-3">Your Recommendations</h3>
      <p class="text-muted">Top matches based on your profile.</p>
      <div class="row g-4">
        <div class="col-md-7">
          <div class="card p-3 chart-card">
            <h5>Career Fit Scores</h5>
            <canvas id="barChart"></canvas>
          </div>
        </div>
        <div class="col-md-5">
          <div class="card p-3 h-100">
            <h5>Top Picks</h5>
            <ol class="mb-3">
              {% for c in top_labels %}<li>{{ c }}</li>{% endfor %}
            </ol>
            <h6>Short-term Focus</h6>
            <p>{{ short_term_text }}</p>
            <h6 class="mt-3">Long-term Outlook</h6>
            <p>{{ long_term_text }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const labels = JSON.parse('{{ labels | tojson | safe }}');
const scores = JSON.parse('{{ scores | tojson | safe }}');
new Chart(document.getElementById('barChart'), {
  type: 'bar',
  data: { labels: labels, datasets: [{ label: 'Suitability', data: scores }]},
  options: { scales: { y: { beginAtZero: true, max: 1 } } }
});
</script>
{% endblock %}
